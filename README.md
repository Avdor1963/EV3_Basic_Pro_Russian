# EV3_Basic_Pro_Russian
Модуль LCDRu для руссификации вывода на ЖК дисплей (LCD) контроллера EV3 среды разработки Clever.
Модуль полностью повторяет (обертывает) все методы стандартного для среды Clever модуля LCD. Дополнительно добавлены методы TextRu, Klav и Test.
Главная цель - вывод на экран русских символов. При этом, так как в Clever нет кодировки русских букв для переменных строчного типа, а также для строчных литералов, то используем следующий приём: печатаем в английской раскладке русский текст. То есть в строку будет вводится код английских букв, но метод TextRu будет выводить на экран ЖКИ блока EV3 русские буквы.
>			"Ghbvth" - "Пример".
Кроме того, если внутри текста вставить косую черту (слеш - "/"), а затем комнаду "/a" можно задать	вывод английских букв, а командой "/r" вновь вернуть вывод русских символов. При этом слешовские команды на экран не выводятся. То есть, например задаём:
>		S = "Ghbdtn! /a Hello. /r Jgznm yf heccrjv"
а выведенно на экран блока EV3 методом LCDRu.TextRU(1, 0, 0, 1, S) будет:
>			"Привет! Hello. Опять на русском"
К сожалению, при таком способе задания русского текста, некоторые спецсимволы в русской раскладке использовать напрямую нельзя, так как они совпадают с русскими буквами. Это символы:
>			":" - "Ж", ";" - "ж", "<" - "Б", "," - "б", ">" - "Ю", "." - "ю", "{" - "Х", "[" - "х", "}" - "Ъ", "]" - "ъ", "~" - "Ё", "`" - "ё", а также символ "#" - будет заменён на "№".
Остальные спецсимволы:
			"!", "@", ";", "%", "^", "&", "?", "*", "(", ")", "_", "-", "+", "="
будут выведены на экран как положено. Но можно воспользоваться возможностью изменять раскалдку символов при помощи слеш-команд.
Например:
>			"Pfgznfz/a,/r f nfr;t njxrf/a. {/r lheubt cbvdjks /a}"
>			"Запятая, а также точка. { другие символы }"
Но следует учитывать, что длина строки в случае использования слеш-команд будет отличаться от той, что выдает метод GetLength() стандартного модуля Text среды Clever. 
Так как буквы "Э" и "э" находятся на кнопке с спецсимволами ["] и ['], которые невозможно задать в строке Small Basiс, то вместо этих букв можно использовать символы "|" - "Э" и "\" - "э", либо добавлять к строке: для "Э" - Text.GetCharacter(34), для "э" - Text.GetCharacter(39). Например, задать строку "Это экспериментальная строка" можно так:
>			Text.GetCharacter(34) + "nj " + Text.GetCharacter(39) + "rcgthbvtynfkmyfz cnhjrf!"
Или так:
>			"|nj \rcgthbvtynfkmyfz cnhjrf!"

Добавленные методы модуля LCDRu:
TextRu - собственно метод позволяющий выводить выводить текст в русской раскладке. Но можно изменять раскладку символов при помощи слеш-команд "/a" и "/r".
Test   - метод вывода на экран ЖКИ блока EV3 тестовой фразы, содержащей все буквы задаваемого шрифта.
		 Для русской раскладки: "СЪЕШЬ ЕШЁ ЭТИХ МЯГКИХ ФРАНЦУЗКИХ БУЛОК, ДА ВЫПЕЙ ЧАЮ." 
		 Для английской раскладки: "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG"
		 Тестовая фраза выводится как заглавными, так и строчными буквами. Отображаем до нажатия на любую кнопку блока EV3. Для шрифта 2, так как он большой, тестовая фраза со заглавными буквами выводится на первый экран,
		 а со строчными буквами, после нажатия на любую кнопку блока EV3, на второй экран.
Klav   - Метод вызывающий экранную клавиатуру. Этот метод позволяет ввести строку русских или английских букв, цифр и большинства спецсимволов путём выбора символа при помощи кнопок "L", "U", "R", "D". По нажатию на кнопку "E" выбранная буква помещается в  
         вводимую строку вверху экрана. Кроме того, в нижнем ряду клавиатуры, кроме символа пробела, есть команды ("U/l" - "З/с") - позволяет переключать заглавные-строчные буквы, ("ENG/РУС" - "eng/рус") - переключает английские и русские буквы,  
		 ("DEL/del" - "ЗАБ/заб") - забой - удаляет последний символ в вводимой строке,	("ESC/esc" - "ОТМ/отм") - отмена ввода - возврат без изменения и ("ENT/ent" - "ВЫП/вып") - выполнить (enter), то есть закрывает экранную клавиатуру
         и возвращает введенную строку.
		 Переключение с английской раскладки на русскую и обратно приводит к вводу в редактируемую строку соответствующих слеш-команд, то есть "/a" - английская раскладка, "/r" - русская. Таким образом, полученная строка будет правильно распечатываться методом   
>        LCDRu.TextRu(...).
Все символы и строки экраннной клавиатуры выводятся шрифтом номер 1. В качестве входного параметра StrIn задается начальное значение строки, которое можно отредактировать. Кроме того, при задании в начале строки	слеш-команды "/0" - входная строка будет выведена шрифтом 0 и будет служить "подсказкой", то есть при первом же вводе любого символа или по команде "забой", подсказка будет очищена. 			
                      
Использование модуля LCDRu.

1). Скопируйте файл LCDRu.xml (или два файла 0_0_2LCDRu.xml и 0_0_LCDRu.xml [см. аннотацию к коммиту]) в директорию, содержащую файлы помощи Clever, например d:\Clever\Help\ru\. Это действие подключит справку по методам модуля LCDRu в окно Cleverа.   
2). Загрузите командами среды разработки Clever, файлы со шрифтами font8x8_0.fnt, font8x8_1.fnt и font16x16.fnt в ту же директорию блока EV3, в которой будет находится ваша программа на Small Basice, которая будет использовать методы модуля LCDRu. Либо создайте эти файлы программами CreateFont8x8_0.bp, CreateFont8x8_1.bp и CreateFont16x16.bp. Эти программы используют модули Font8x8_0.bpm, Font8x8_1.bpm и Font16x16.bpm, которые содержат кодировку растра русских букв, соответсвующего фонта с номерами 0, 1 и 2. Кодировку растра можно править по своему усмотрению.   
3). В своей программе импортируйте модуль LCDRu (соответсвенно файл LCDRu.bpm должен быть доступен в вашей программе).   
>    import "LCDRu"
4). Программа TestLCDRu.bp - это пример использования модуля LCDRu - она выводит тестовые фразы, использующие полный набор букв всеми шрифтами, доступными в среде разработки Clever. А после демострирует метод Klav модуля LCDRu для ввода строки при помощи экранной клавиатуры.    
5). Если по какой то причине у вас пропадут файлы шрифтов с расширением ".fnt", то их можно пересоздать программами CreateFont8x8_0.bp, CreateFont8x8_1.bp и CreateFont16x16.bp.   
